<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="shortcut icon" type="image/x-icon" href="/static/favicon.ico"/>
    <title>Door</title>
    <script>
        /*to prevent Firefox FOUC, this must be here*/
        let FF_FOUC_FIX;
    </script>
</head>
<body>
    <iframe src="/static/navbar.html" onload="this.before((this.contentDocument.body||this.contentDocument).children[0]);this.remove()"></iframe>
    <iframe name="dummyframe"></iframe>

    <div class="flex-column">
        <div style="flex-basis: 5vh;" class="flex-row"><h1>Garage</h1></div>
        <div style="flex-basis: 5vh;" class="flex-row"><img style="object-fit: cover; width: auto; max-height: 50vh;" src="https://vizzyy.ddns.net:9321/video3"  alt="Garage"/></div>
        <div style="flex-basis: 5vh;" class="flex-row"><h1></h1></div>
        <div class="flex-row">
            <form target="dummyframe" method="get">
                <input class="generalButton" type="submit" onclick="send_request('/api/garage/light')" value="LIGHT">
            </form>
        </div>
        <div class="flex-row">
            <form target="dummyframe" method="get">
                <input class="generalButton" type="submit" onclick="send_request('/api/garage/door')" value="GATE">
            </form>
        </div>
    </div>
</body>
<script>
    let xhttp = new XMLHttpRequest();

    function send_request(path) {
        if (confirm('Are you sure?')) {
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    console.log("Successfully called "+path)
                } else {
                    console.log("Failed to call "+path)
                }
            };
            xhttp.open("GET", path, true);
            xhttp.send();
        }
    }
</script>
</html>
